{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="tutor-details">
    <!--img src="{{ tutor.user.profile_picture }}" alt="{{ tutor.name }}"-->
    <h1>{{ tutor.name }}</h1>
    <p>Degree: {{ tutor.degree }}</p>
    <p>School: {{ tutor.school }}</p>
    <p>Major: {{ tutor.major }}</p>
    <p>Hourly Rate: ${{ tutor.hourly_rate }}</p>
    <p>{{ tutor.description }}</p>
</div>

<div class="reviews">
    <h2>Reviews</h2>
    {% for review in reviews %}
        <div class="review">
            <p>Rating: {{ review.rating }} stars</p>
            <p>{{ review.text }}</p>
            <p>By {{ review.parent.user.username }} on {{ review.created_at }}</p>
        </div>
    {% endfor %}

    {% if user.is_authenticated and user.user_type == 'parent' %}
    <form method="post">
        {% csrf_token %}
        <label for="rating">Rating:</label>
        <input type="number" name="rating" min="1" max="5" required>
        <label for="comment">Comment:</label>
        <textarea name="comment" required></textarea>
        <button type="submit" name="submit_review">Submit Review</button>
    </form>
    {% else %}
        <p>You must be logged in as a parent to submit a review.</p>
    {% endif %}
</div>

<div class="contact-form">
    <h2>Contact Tutor</h2>
    {% if user.is_authenticated and user.user_type == 'parent' %}
    <form method="post" id="contact-form'">
        {% csrf_token %}
        {{ contact_form.as_p }}
        <button type="submit" name="submit_contact">Send Message</button>
    </form>
    {% else %}
        <p>You must be logged in as a parent to contact a tutor.</p>
    {% endif %}
</div>
{% endblock %}
